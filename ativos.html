<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Meus Ativos</title>

<style>
/* (mesmo CSS que você tinha — preservado) */
body{
  margin:0;
  font-family:Arial;
  color:#000;
  background: radial-gradient(circle at top, #4da3ff, #003bff 60%, #001a66);
  backdrop-filter: blur(4px);
}

body::before{
  content:"";
  position:fixed;
  top:0;
  left:0;
  right:0;
  bottom:0;
  background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.35), transparent 60%),
              radial-gradient(circle at 80% 70%, rgba(255,255,255,0.20), transparent 70%);
  pointer-events:none;
  filter:blur(40px);
}

.header{
  background:rgba(255,255,255,0.35);
  padding:36px 18px;
  text-align:center;
  border-bottom-left-radius:20px;
  border-bottom-right-radius:20px;
  box-shadow:0 6px 20px rgba(0,0,0,.3);
  backdrop-filter:blur(8px);
  color:#000;
}

.container{
  padding:18px;
}

.card{
  background:rgba(255,255,255,0.35);
  padding:16px;
  border-radius:12px;
  box-shadow:0 3px 12px rgba(0,0,0,.25);
  margin-bottom:12px;
  backdrop-filter:blur(10px);
  color:#000;
}

.item{
  background:rgba(255,255,255,0.45);
  padding:12px;
  border-radius:8px;
  margin-bottom:10px;
  font-size:16px;
  color:#000;
  backdrop-filter:blur(6px);
  font-weight:bold;
}

.glow-text {
  position: relative;
  display: inline-block;
  -webkit-text-fill-color: #000;
  text-shadow: 
      0 0 6px rgba(255,255,255,0.9),
      0 0 12px rgba(255,255,255,0.8),
      0 0 20px rgba(255,255,255,0.7);
  font-weight: bold;
}
</style>
</head>
<body>

<div class="header">
  <h2 class="glow-text">Meus Ativos</h2>
</div>

<div class="container">

  <!-- QUANTIDADE DE ATIVOS -->
  <div class="card">
    <h3 id="ativosTotal" class="glow-text" style="margin:0">0</h3>
    <div style="color:#000">TOTAL DE ATIVOS</div>
  </div>

  <!-- LISTA -->
  <div class="card">
    <h3 class="glow-text">Lista de Ativos</h3>
    <div id="listaAtivos"></div>
  </div>

</div>

<script src="firebase.js"></script>
<script>
  // Verificar login e carregar ativos do Firestore (mantive layout original)
  auth.onAuthStateChanged(async user=>{
    if(!user){
      window.location.href = 'login.html?next=ativos';
      return;
    }
    await ensureUserRecord(user);

    const lista = document.getElementById('listaAtivos');
    const total = document.getElementById('ativosTotal');

    const q = db.collection('ativos').where('uid','==', user.uid).orderBy('criadoEm','desc');
    q.onSnapshot(snapshot=>{
      lista.innerHTML = "";
      total.textContent = snapshot.size;
      if(snapshot.empty){
        lista.innerHTML = "<div class='item'>Nenhum ativo comprado ainda.</div>";
        return;
      }
      snapshot.forEach(doc=>{
        const a = doc.data();
        const el = document.createElement('div');
        el.className = 'item';
        const date = a.criadoEm ? a.criadoEm.toDate().toLocaleString('pt-BR') : '';
        el.innerHTML = `
          <strong>${a.nome}</strong><br>
          Valor: R$${Number(a.valor).toFixed(2)}<br>
          Renda Diária: R$${Number(a.renda||0).toFixed(2)}<br>
          <small>${date}</small>
        `;
        lista.appendChild(el);
      });
    });
  });
</script>

</body>
</html>
