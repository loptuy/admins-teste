<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Painel Admin Offline</title>
<style>
body{font-family:Arial;background:#f2f2f2;padding:20px}
.box{background:#fff;padding:15px;margin-bottom:20px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.1)}
input,button{padding:8px;margin:5px}
table{width:100%;border-collapse: collapse}
td,th{padding:10px;border-bottom:1px solid #ddd}
button{background:#4da3ff;border:none;border-radius:6px;cursor:pointer;color:#fff}
</style>
</head>
<body>

<h1>Painel Administrativo Offline</h1>

<div id="loginBox" class="box">
<h2>Login</h2>
<input id="loginEmail" placeholder="Email"><br>
<input id="loginSenha" type="password" placeholder="Senha"><br>
<button onclick="fazerLogin()">Entrar</button>
<p id="msgLogin" style="color:red"></p>
</div>

<div id="painel" style="display:none">
<h2>Bem-vindo, Admin!</h2>
<button onclick="logout()">Sair</button>

<div class="box">
<h3>Produtos</h3>
<input id="pNome" placeholder="Nome">
<input id="pValor" type="number" placeholder="Valor">
<input id="pRenda" type="number" placeholder="Renda">
<button onclick="addProduto()">Adicionar Produto</button>
<div id="listaProdutos"></div>
</div>

<div class="box">
<h3>Usuários</h3>
<input id="uEmail" placeholder="Email">
<input id="uNome" placeholder="Nome">
<input id="uSaldo" type="number" placeholder="Saldo">
<button onclick="addUsuario()">Adicionar Usuário</button>
<div id="listaUsuarios"></div>
</div>

<div class="box">
<h3>Saques</h3>
<div id="listaSaques"></div>
</div>

</div>

<script>
// ========== LOCAL STORAGE ==========
function lsGet(k,d){return JSON.parse(localStorage.getItem(k))||d}
function lsSet(k,v){localStorage.setItem(k,JSON.stringify(v))}

// Cria admin padrão se não existir
if(!lsGet("admin")) lsSet("admin",{email:"admin@local",senha:"1234"})
if(!lsGet("produtos")) lsSet("produtos",[])
if(!lsGet("usuarios")) lsSet("usuarios",[])
if(!lsGet("saques")) lsSet("saques",[])

// ========== LOGIN ==========
function fazerLogin(){
let e=document.getElementById("loginEmail").value.trim()
let s=document.getElementById("loginSenha").value.trim()
let a=lsGet("admin",null)
if(a && e===a.email && s===a.senha){
document.getElementById("loginBox").style.display="none"
document.getElementById("painel").style.display="block"
carregarTudo()
}else{document.getElementById("msgLogin").textContent="Credenciais inválidas"}
}
function logout(){
document.getElementById("painel").style.display="none"
document.getElementById("loginBox").style.display="block"
}

// ========== PRODUTOS ==========
function addProduto(){
let n=document.getElementById("pNome").value
let v=Number(document.getElementById("pValor").value)
let r=Number(document.getElementById("pRenda").value)
if(!n||!v)return alert("Preencha todos os campos")
let p=lsGet("produtos",[])
p.push({id:Date.now(),nome:n,valor:v,renda:r})
lsSet("produtos",p)
carregarProdutos()
}
function carregarProdutos(){
let p=lsGet("produtos",[])
let h="<table><tr><th>Nome</th><th>Valor</th><th>Renda</th><th>Ação</th></tr>"
p.forEach(x=>{h+=`<tr><td>${x.nome}</td><td>${x.valor}</td><td>${x.renda}</td><td><button onclick="delProduto(${x.id})">Excluir</button></td></tr>`})
h+="</table>"
document.getElementById("listaProdutos").innerHTML=h
}
function delProduto(id){
let p=lsGet("produtos",[]).filter(x=>x.id!==id)
lsSet("produtos",p)
carregarProdutos()
}

// ========== USUÁRIOS ==========
function addUsuario(){
let e=document.getElementById("uEmail").value
let n=document.getElementById("uNome").value
let s=Number(document.getElementById("uSaldo").value)
if(!e||!n)return alert("Preencha todos os campos")
let u=lsGet("usuarios",[])
u.push({id:Date.now(),email:e,nome:n,saldo:s})
lsSet("usuarios",u)
carregarUsuarios()
}
function carregarUsuarios(){
let u=lsGet("usuarios",[])
let h="<table><tr><th>Email</th><th>Nome</th><th>Saldo</th><th>Ação</th></tr>"
u.forEach(x=>{h+=`<tr><td>${x.email}</td><td>${x.nome}</td><td>${x.saldo}</td><td><button onclick="ajustarSaldo(${x.id})">Ajustar</button></td></tr>`})
h+="</table>"
document.getElementById("listaUsuarios").innerHTML=h
}
function ajustarSaldo(id){
let s=prompt("Novo saldo:")
if(s===null)return
s=Number(s)
let u=lsGet("usuarios",[]).map(x=>x.id===id?{...x,saldo:s}:x)
lsSet("usuarios",u)
carregarUsuarios()
}

// ========== SAQUES ==========
function carregarSaques(){
let s=lsGet("saques",[])
let h="<table><tr><th>ID</th><th>Usuário</th><th>Valor</th></tr>"
s.forEach(x=>{h+=`<tr><td>${x.id}</td><td>${x.usuario}</td><td>${x.valor}</td></tr>`})
h+="</table>"
document.getElementById("listaSaques").innerHTML=h
}

// ========== CARREGAR TUDO ==========
function carregarTudo(){carregarProdutos();carregarUsuarios();carregarSaques()}

</script>

</body>
</html>
